<!DOCTYPE html>
<html>
	<head>
		<title>expromptum &mdash; feedback</title>

		<script src="http://yandex.st/jquery/2.1.0/jquery.js"></script>

		<link  href="../../expromptum.css" rel="stylesheet"/>
		<script src="../../expromptum.js"></script>
	</head>

	<body>
		<form method="post">
			<div class="field">
				<label for="field_name">Name</label>
				<input name="name" id="field_name" data-xp="required: true"/>
			</div>

			<div class="field">
				<label for="field_email">Email</label>
				<input name="email" id="field_email" data-xp="type: 'email', required: true"/>
			</div>

			<div class="field">
				<label for="field_message">Message</label>
				<textarea name="message" id="field_message" data-xp="required: true"></textarea>
			</div>

			<div class="field">
				<input type="submit" value="Send" data-xp="enabled_on_completed: true"/>
			</div>

			<div id="uncompleted"></div>
		</form>

		<script>
			(function(){
				expromptum();

				var uncompleted = $('#uncompleted');

				expromptum('form').first().change(function(){
					var html = '';

					this._param('required')
						.append(this._param('invalid'))
						.each(function(){
							html += (html ? ', ': '') + this.$label.text();
						});

					uncompleted.html((html ? 'Fill fields: ' : '') + html);
				});
			})();
		</script>
	</body>
</html>
